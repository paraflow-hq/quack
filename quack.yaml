app_name: quack
global_dependencies:
  # 所有 Target 都依赖的文件，一旦改动，所有缓存失效
  - name: source:quack
    type: source
    paths:
      - ^.*$
    excludes:
      - ^src/.*_test\.py$

scripts:
  - name: test
    description: 执行 pytest
    command: uv run -m quack quack:test
  - name: test-sleep
    description: 测试长时间运行的命令
    command: uv run quack sleep
  - name: sleep
    description: 睡眠
    command: sleep 30

targets:
  - name: quack:test
    description: 执行 pytest
    dependencies:
      - type: source
        paths:
          - ^.*$
    outputs:
      paths:
        - README.md
    operations:
      build:
        command: uv run pytest .
